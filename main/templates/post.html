{% extends "layout.html" %}

{% block title %}
     {{ title }}
{% endblock %}

{% block main %}



 <div class="content-section">

	</div>
    <div class="border-top pt-3">
        <small class="text-muted">
            Need An Account? <a class="ml-2" href="{{ url_for('users.register') }}">Sign Up Now</a>
        </small>
    </div>

<div id="blog">

     <div class="card text-center">
		    <div class="card-header">
				<i>{{ post.date_posted.strftime('%Y-%m-%d')}}</i>
			</div>
			<div class="card-body">
                <div class="center">
                    <p><img class="ronunded-circle account-img" src="{{ image_file }}"></p>
                </div>
			    <div class="media-body">
				<blockquote class="mb-0">
                    <h2 class="account-heading"><a class="article-title" href="{{ url_for('posts.post',post_id=post.id)}}" >{{ post.title }}</a></h2>
				    <footer class="blockquote-footer">{{ post.author.username }}</footer>
                </blockquote>
			    </div>
            </div>
     </div>
	  <article class="media">
      <div class="media-body" style="color:white;border: double;">
	  <div class="article-metadata" style="margin: 10px;">
		    <br>{{ post.content|safe }}<br>
		{%if post.author == current_user %}
			<div>
                  <a class="btn btn-secondary btn-sm m-1" href="{{ url_for('posts.update_post', post_id=post.id)}}">Update</a>
				  <button type="button" class="btn btn-danger btn-sm m-1" data-toggle="modal" data-target="#deleteModal">Delete</button>
            </div>
        {% endif %}
      </div>

      </div>
      </article>
  <!-- Modal -->
  <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteModalLabel">Delete Post?</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <form action="{{ url_for('posts.delete_post', post_id=post.id) }}" method="POST">
            <input class="btn btn-danger" type="submit" value="Delete">
          </form>
        </div>
      </div>
    </div>
					
					</article>
		</div>
		
</div>
{% endblock %}